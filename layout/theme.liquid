<!doctype html>
<html lang="{{ request.locale.iso_code }}">
  <head>

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}" />
    {% endif %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="canonical" href="{{ canonical_url }}">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">

    {{ content_for_header }}

    <style>
      @font-face {
        font-family: 'scale-variable, sans-serif;';
        src: url('{{ 'Scale-VF-Regular.woff2' | asset_url }}') format('woff2')
        , url('{{ 'Scale-VF-Regular.woff' | asset_url }}') format('woff');
        font-weight: 400;
        font-style: normal;
        /* font-stretch: 100%; */
        font-display: swap;
      }
    </style>

    {% comment %} <lincustom.csseconnect" href="https://fonts.googleapis.com"> {% endcomment %}
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.css">

    {% # Inlined CSS Variables %}
  {% render 'css-variables' %}

    {% # Load and preload the critical CSS %}
    {{ 'style.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'custom.css' | asset_url | stylesheet_tag: preload: true }}

    {% # Social, title, etc. %}
    {% render 'meta-tags' %}

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}" />
    {% endif %}

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"></script>


  </head>

  <body>
    {% sections 'header-group' %}

    <div class="main">
      {{ content_for_layout }}
    </div>

    {% sections 'footer-group' %}

    {% comment %} Script Tags {% endcomment %}
    <script src="https://unpkg.com/lenis@1.3.1/dist/lenis.min.js" defer></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/DrawSVGPlugin.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js" defer></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", (event) => {
      setTimeout(() => {
          const lenis = new Lenis({
              duration: 1.2,
              easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t))
          });

          function raf(time) {
              lenis.raf(time);
              requestAnimationFrame(raf);
          }
          requestAnimationFrame(raf);

          // Header Scroll Backdrop
          let removeTimer;
          let allowHover = true;
          const header = document.querySelector('header');

          lenis.on('scroll', ({ scroll, limit }) => {
              const scrollPercentage = (scroll / limit) * 100;
              allowHover = scrollPercentage <= 5;

              // header backdrop logic
              if (scrollPercentage > 5) {
                  header.classList.add('backdrop');

                  // forceâ€close menu if you scrolled past 5%

                  clearTimeout(removeTimer);
              } else {
                  header.classList.remove('backdrop');
              }
          });

      }, 0);

        const sideScrollSection = document.querySelector('.scroll-sec')
        const container = document.querySelector('.scrollsec-wrapper')
        
        if (sideScrollSection && container) {
          const horizontalLength = container.scrollWidth - window.innerWidth
        
          gsap.to(container, {
            x: - horizontalLength,
            ease: 'none',
            scrollTrigger: {
              trigger: '.scroll-sec',
              start: 'top top',
              end: () => `+=${horizontalLength}`,
              scrub: true,
              pin: true,
              pinSpacer: false,
              anticipatePin: 1
            }
          })
        }

        const imageText = document.querySelector('.image-text-scroll')
        if(imageText){
          gsap.set(["#image1", "#image2", "#image3", ".dt-in.one", ".dt-in.two", ".dt-in.three", ".dt-in.four"], {opacity: 0});

          let tl = gsap.timeline({
            scrollTrigger: {
              trigger: imageText,
              start: "top top",
              end: "+=300%",   // enough scroll space for 3 steps
              pin: true,
              scrub: 1,
              snap: {
                snapTo: "labels", // snap to timeline labels
                duration: {min: 0.2, max: 0.5}, // smooth snapping
                delay: 0.5,
                ease: "none"
              }
            }
          });

          // Add labels and animations for each step
          tl.addLabel("step1")
            .to("#image1", {opacity: 1, duration: 0.8})
            .addLabel("step2")
            .to(".dt-in.one", {opacity: 1, duration: 0.8})
            .addLabel("step3")
            .to("#image3", {opacity: 1, duration: 0.8})
            .addLabel("step4")
            .to(".dt-in.three", {opacity: 1, duration: 0.8})
            .addLabel("step5")
            .to("#image2", {opacity: 1, duration: 0.8})
            .addLabel("step6")
            .to(".dt-in.two", {opacity: 1, duration: 0.8})
            .addLabel("step7")
            .to(".dt-in.four", {opacity: 1, duration: 0.8});
        }

        return() => {
          ScrollTrigger.getAll().forEach(st => st.kill());
        };
        ScrollTrigger.refresh();
          });
    </script>

    <script>
      AOS.init();
    </script>

    <script>
        $('.bxslider').bxSlider({
      minSlides: 4,
      maxSlides: 4,
      slideWidth: 400,
      slideMargin: 16,
      ticker: true,
      infiniteLoop: true,
      tickerHover: true,
      speed: 18000
        });

        $('.vc-carousel .owl-carousel').owlCarousel({
        center: true,
        autoplay: true,
        autoplayTimeout: 15000,
        items:5,
        loop:true,
        margin:10,
        responsive:{
            600:{
                items:4
            }
        }
          });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".sws-fruits").forEach((container) => {
          const items = Array.from(container.querySelectorAll(".swsfruits-item"));
          const shouldReset = container.dataset.reset === "true";

          container.addEventListener("mouseenter", () => {
            items.forEach((el, index) => {
              setTimeout(() => {
                el.classList.add("visible");
              }, index * 200); // 200ms delay per item (adjust as needed)
            });
          });
        });
      });
    </script>


  </body>
</html>