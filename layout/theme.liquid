<!doctype html>
<html lang="{{ request.locale.iso_code }}">

  <head>
	<!-- Added by APP PLAZA -->
	{% include 'app-plaza' %}
	<!-- /Added by APP PLAZA -->
    {%- render 'ecom_header' -%}

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}" />
    {% endif %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="canonical" href="{{ canonical_url }}" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">

    {{ content_for_header }}

    {% comment %} <lincustom.csseconnect" href="https://fonts.googleapis.com"> {% endcomment %}
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.typekit.net/dic6enr.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.3/animate.min.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.css"
      integrity="sha512-UTNP5BXLIptsaj5WdKFrkFov94lDx+eBvbKyoe1YAfjeRPC+gT5kyZ10kOHCfNZqEui1sxmqvodNUx3KbuYI/A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
      integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer" />
      <link rel="stylesheet" href="{{ 'cart-quantity-control.css' | asset_url }}">
      <script src="{{ 'cart-quantity-control.js' | asset_url }}" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" defer></script>

    {% # Inlined CSS Variables %}
  {% render 'css-variables' %}

    {% # Load and preload the critical CSS %}
    {{ 'style.css' | asset_url | stylesheet_tag: preload: true }}
    {{ 'custom.css' | asset_url | stylesheet_tag: preload: true }}
    {{ 'custom-2.css' | asset_url | stylesheet_tag: preload: true }}
    {{ 'responsive.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'responsive-2.css' | asset_url | stylesheet_tag: preload: true }}

    {% # Social, title, etc. %}
    {% render 'meta-tags' %}

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}" />
    {% endif %}

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"></script>

    <script>
      window.shopCurrency = "{{ shop.currency }}";
      window.activeCurrency = "{{ cart.currency.iso_code | default: shop.currency }}";
      window.currencySymbol = "{{ cart.currency.symbol | default: shop.currency_symbol }}";
    </script>
    
  </head>

  <body>
    {% section 'top-bar' %}
    {% sections 'header-group' %}
    {% comment %} Disabled - Using corner cart app now {% endcomment %}
    {%- comment %} {% section 'side-cart' %} {% endcomment %}

    <div class="main">
      {{ content_for_layout }}
    </div>
    {% section 'newsletter' %}
    {% sections 'footer-group' %}

    {% comment %} Script Tags {% endcomment %}
    <script src="https://unpkg.com/lenis@1.3.1/dist/lenis.min.js" defer></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bxslider@4.2.17/dist/jquery.bxslider.min.js" defer></script>
    <script
      src="{{ 'product-card.js' |  asset_url }}"
      data-reload="product-card-js"
      defer></script>

    <script src="{{ 'custom.js' |  asset_url }}" defer></script>

    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
          setTimeout(() => {
            const lenis = new Lenis({
              duration: 1.2,
              easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t))
            });

            function raf(time) {
              lenis.raf(time);
              requestAnimationFrame(raf);
            }
            requestAnimationFrame(raf);

            const header = document.querySelector('header');

            let lastScroll = 0;
            const BACKDROP_TRIGGER = 80; // px from top

            lenis.on('scroll', ({ scroll }) => {

              /* ===============================
                BACKDROP — position based
                =============================== */
              if (scroll > BACKDROP_TRIGGER) {
                header.classList.add('backdrop');
              } else {
                // only remove when fully back to top
                header.classList.remove('backdrop');
              }

              /* ===============================
                ACTIVE — direction based
                =============================== */
              if (scroll > lastScroll && scroll > BACKDROP_TRIGGER) {
                // scrolling down
                header.classList.add('active');
              } else {
                // scrolling up OR near top
                header.classList.remove('active');
              }

              lastScroll = scroll;
            });

          }, 0);



      

      if (window.gsap && window.ScrollTrigger) {
  gsap.registerPlugin(ScrollTrigger);
  const mm = gsap.matchMedia();

  mm.add("(min-width: 993px)", () => {
    const imageText = document.querySelector(".image-text-scroll");
    if (!imageText) return;

    const targets = ["#image1", "#image2", "#image3", ".dt-in.one", ".dt-in.two", ".dt-in.three", ".dt-in.four"];

    gsap.set(targets, { opacity: 0 });

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: imageText,
        start: "top 20%", // Triggers much earlier (when the section is near the top)
        end: "+=30%",    // Very short scroll distance—releases the pin almost immediately
        pin: true,
        scrub: false,    // Animation plays at its own speed, not linked to scroll speed
        toggleActions: "play none none reverse",
        // markers: true // Uncomment this line to see exactly where the triggers are!
      }
    });

    tl.to(targets, {
      opacity: 1,
      duration: 0.4,    // Faster animation duration
      stagger: 0.05,    // Faster sequence
      ease: "power1.out"
    });

    return () => {
      tl.scrollTrigger && tl.scrollTrigger.kill();
      tl.kill();
    };
  });
}
          }); /* ← missing closer added here */
    </script>


    <script>
          AOS.init();
    </script>

    <script>
      $(document).ready(function(){
        var slidesToShow = ($(window).width() < 1000) ? 1.5 : 4;
          $('.creviews-slider .bxslider').bxSlider({
      minSlides: slidesToShow,
      maxSlides: slidesToShow,
      slideWidth: 400,
      slideMargin: 16,
      ticker: true,
      infiniteLoop: true,
      tickerHover: false,
      speed: 22000
          });

          $('.vc-carousel .owl-carousel').owlCarousel({
      center: true,
      autoplay: true,
      autoplayTimeout: 15000,
      items: 2,
      loop: true,
      margin: 10,
      dots: false,
      responsive: {
        0: {
          items: 2,
          margin: 6
        },
        600: {
          items: 2
        },
        900: {
          items: 4
        }
      }
          });

          $('.scs-slider .owl-carousel').owlCarousel({
      items: 1,
      loop: false,
      margin: 30,
      autoplay: true,
      autoplayTimeout: 15000,
      dots: true,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 2
        },
        1000: {
          items: 2
        }
      }
          });
      });
    </script>

    <script>
          (function ($) {
      $(document).ready(function () {
        $('.scrollsec-slider').each(function () {
          var $scs = $(this);                      // wrapper to receive odd/even class
          var $owl = $scs.find('.owl-carousel');   // the actual carousel inside

          // helper: set odd/even on wrapper based on 1-based slide position
          function setOddEvenByPage(pageIndex) {
            var slideNum = (pageIndex || 0) + 1;   // convert 0-based to 1-based
            var cls = (slideNum % 2) ? 'odd' : 'even';
            $scs.removeClass('odd even').addClass(cls);
          }

          // initial class after owl initialized
          $owl.on('initialized.owl.carousel', function (event) {
            // event.page.index is present in Owl v2 (0-based)
            var pageIndex = (event.page && event.page.index !== undefined) ? event.page.index : 0;
            setOddEvenByPage(pageIndex);
          });

          // on slide change — update wrapper class
          $owl.on('changed.owl.carousel', function (event) {
            var pageIndex = (event.page && event.page.index !== undefined) ? event.page.index : 0;
            setOddEvenByPage(pageIndex);
          });

          // If Owl is already initialized before this script runs:
          if ($owl.hasClass('owl-loaded')) {
            // try to read current index from data (fallbacks)
            var carouselData = $owl.data('owl.carousel') || $owl.data('owl');
            var currentPage = (carouselData && carouselData.settings && carouselData._current !== undefined)
              ? carouselData._current
              : 0;
            // prefer event.page if available; otherwise use _current or 0
            setOddEvenByPage(currentPage);
          }
        });
      });
          })(jQuery);
    </script>


    <script>
          document.addEventListener("DOMContentLoaded", () => {
      document.querySelectorAll(".sws-fruits").forEach((container) => {
        const items = Array.from(container.querySelectorAll(".swsfruits-item"));
        const shouldReset = container.dataset.reset === "true";

        container.addEventListener("mouseenter", () => {
          items.forEach((el, index) => {
            setTimeout(() => {
              el.classList.add("visible");
            }, index * 200); // 200ms delay per item (adjust as needed)
          });
        });
      });
          });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        function openNav() {
            document.getElementById("mySidenav").classList.toggle("active");
            document.body.classList.toggle("stay");
            document.querySelector(".navbar_toggler")?.classList.toggle("open");
        }

          var $cmenu = $('.hnav-menu');

          $cmenu.find('.has-mega-menu > .arrow').on('click', function (e) {
            // Check if the window width is less than 992px
            if (window.innerWidth < 992) {
              e.preventDefault();
              
              var $megaMenu = $(this).next('.mega-menu');

              if ($megaMenu.is(':visible')) {
                $(this).removeClass('active');
                $megaMenu.slideUp();
              } else {
                // Reset other arrows and menus
                $cmenu.find('.has-mega-menu > .arrow').removeClass('active');
                $cmenu.find('.mega-menu').slideUp();

                // Open current menu
                $(this).addClass('active');
                $megaMenu.slideToggle();
              }
            }
          });
      
          /* Close the side navigation */
          // function closeNav() {
          //   document.getElementById("mySidenav").classList.remove("active");
          //   document.body.classList.remove("stay");
          //   document.querySelector(".navbar_toggler")?.classList.remove("open");
          // }

          // Close nav when clicking anywhere on the page
          // document.documentElement.addEventListener("click", () => {
          //   document.getElementById("mySidenav").classList.remove("active");
          //   document.body.classList.remove("stay");
          //   document.querySelector(".navbar_toggler")?.classList.remove("open");
          // });
        });

    </script>


    {%- render "ecom_footer" - %}
  </body>

</html>